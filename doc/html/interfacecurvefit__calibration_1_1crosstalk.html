<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>curvefit: curvefit_calibration::crosstalk Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">curvefit
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">A library for fitting functions to sets of data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('interfacecurvefit__calibration_1_1crosstalk.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="interfacecurvefit__calibration_1_1crosstalk-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">curvefit_calibration::crosstalk Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Computes the crosstalk errors for a multiple degree-of-freedom data set.  
 <a href="interfacecurvefit__calibration_1_1crosstalk.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9424d3598740a14b26d2c9cf107d1ed0"><td class="memItemLeft" align="right" valign="top">real(real64) function, dimension(size(xerr, 2), size(xerr, 2))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecurvefit__calibration_1_1crosstalk.html#a9424d3598740a14b26d2c9cf107d1ed0">xtalk_1</a> (xerr, indices, err)</td></tr>
<tr class="memdesc:a9424d3598740a14b26d2c9cf107d1ed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the crosstalk errors for a multiple degree-of-freedom data set.  <a href="#a9424d3598740a14b26d2c9cf107d1ed0">More...</a><br /></td></tr>
<tr class="separator:a9424d3598740a14b26d2c9cf107d1ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Computes the crosstalk errors for a multiple degree-of-freedom data set. </p>

<p class="definition">Definition at line <a class="el" href="curvefit__calibration_8f90_source.html#l00094">94</a> of file <a class="el" href="curvefit__calibration_8f90_source.html">curvefit_calibration.f90</a>.</p>
</div><h2 class="groupheader">Member Function/Subroutine Documentation</h2>
<a id="a9424d3598740a14b26d2c9cf107d1ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9424d3598740a14b26d2c9cf107d1ed0">&#9670;&nbsp;</a></span>xtalk_1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">real(real64) function, dimension(size(xerr, 2), size(xerr, 2)) curvefit_calibration::crosstalk::xtalk_1 </td>
          <td>(</td>
          <td class="paramtype">real(real64), dimension(:,:), intent(in)&#160;</td>
          <td class="paramname"><em>xerr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(int32), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class(errors), intent(inout), optional, target&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes the crosstalk errors for a multiple degree-of-freedom data set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xerr</td><td>An NPTS-by-NDOF matrix containing the measurement error values (computed such that XERR = X MEASURED - X APPLIED). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">indices</td><td>A 2*NDOF element array containing row indices defining the rows where each degree-of-freedom was applied in the data set <code>xerr</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">err</td><td>An optional errors-based object that if provided can be used to retrieve information relating to any errors encountered during execution. If not provided, a default implementation of the errors class is used internally to provide error handling. Possible errors and warning messages that may be encountered are as follows.<ul>
<li>CF_ARRAY_SIZE_ERROR: Occurs if <code>indices</code> is not 2*NDOF in size.</li>
<li>CF_ARRAY_INDEX_ERROR: Occurs if any of the entries in <code>indices</code> are outside the row bounds of <code>xerr</code>.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A NDOF-by-NDOF matrix containing the crosstalk errors such that each loaded degree of freedom is represented by its own row, and each responding degree of freedom is represented by its own column.</dd></dl>
<dl class="section user"><dt>Usage</dt><dd>The following program computes the crosstalk errors for a 2 DOF system. The applied data is as follows (there are 34 data points for each DOF). <pre class="fragment"> 0              0
 3000           0
 6000           0
 7500           0
 9000           0
 12000          0
 15000          0
 7500           0
 0              0
 0              0
 -3000          0
 -6000          0
 -7500          0
 -9000          0
 -12000         0
 -15000         0
 -7500          0
 0              0
 --------------------
 0              0
 0              67.79087067
 0              135.5817413
 0              203.3726196
 0              271.1634827
 0              338.9543762
 0              203.3726196
 0              0
 0              0
 0              -67.79087067
 0              -135.5817413
 0              -203.3726196
 0              -271.1634827
 0              -338.9543762
 0              -203.3726196
 0              0</pre> The data output from the instrument under test is as follows. <pre class="fragment"> 0                  0
 0.389050007        1.22E-03
 0.778159976        2.59E-03
 0.972689986        2.90E-03
 1.167140007        3.14E-03
 1.555999994        3.38E-03
 1.944839954        3.56E-03
 0.972599983        4.77E-03
 -1E-05             -1.00E-05
 0                  0
 -0.388886005       2.10E-04
 -0.777750015       5.10E-04
 -0.972150028       6.90E-04
 -1.166540027       8.80E-04
 -1.555330038       1.30E-03
 -1.944100022       1.78E-03
 -0.971710026       5.80E-04
 4.00E-05           3.00E-05
 ----------------------------
 0                  0
 -4.40E-04          0.271560013
 -1.30E-03          0.543290019
 -2.40E-03          0.815069973
 -3.82E-03          1.086820006
 -5.28E-03          1.358809948
 -2.57E-03          0.815530002
 1.50E-04           1.00E-05
 0                  0
 1.44E-03           -0.271450013
 3.06E-03           -0.543120027
 4.46E-03           -0.814930022
 5.67E-03           -1.086799979
 6.88E-03           -1.35879004
 4.51E-03           -0.815479994
 -2.00E-05          0</pre> The code to compute the crosstalk errors given the above raw data is then as follows. <div class="fragment"><div class="line"><span class="keyword">program</span> main</div><div class="line">  <span class="comment">! Parameters</span></div><div class="line">  <span class="keywordtype">integer(int32)</span>, <span class="keywordtype">parameter</span> :: npts = 34</div><div class="line">  <span class="keywordtype">integer(int32)</span>, <span class="keywordtype">parameter</span> :: ndof = 2</div><div class="line"></div><div class="line">  <span class="comment">! Local Variables</span></div><div class="line">  <span class="keywordtype">integer(int32)</span> :: indices(2*ndof)</div><div class="line">  <span class="keywordtype">real(real64)</span>, <span class="keywordtype">dimension(npts, ndof)</span> :: xin, xout, xerr, xmeas</div><div class="line">  <span class="keywordtype">real(real64)</span>, <span class="keywordtype">dimension(ndof, npts)</span> :: xint, xmeast</div><div class="line">  <span class="keywordtype">real(real64)</span>, <span class="keywordtype">dimension(ndof, ndof)</span> :: c, ans, xt</div><div class="line"></div><div class="line">  <span class="comment">! Initialization</span></div><div class="line">  xin = reshape([0.0, 3000.0, 6000.0, 7500.0, 9000.0, 12000.0, &amp;</div><div class="line">      15000.0, 7500.0, 0.0, 0.0, -3000.0, -6000.0, -7500.0, -9000.0, &amp;</div><div class="line">      -12000.0, -15000.0, -7500.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &amp;</div><div class="line">      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &amp;</div><div class="line">      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, &amp;</div><div class="line">      0.0, 0.0, 0.0, 67.7908728, 135.5817456, 203.3726184, 271.1634912, &amp;</div><div class="line">      338.954364, 203.3726184, 0.0, 0.0, -67.7908728, -135.5817456, &amp;</div><div class="line">      -203.3726184, -271.1634912, -338.954364, -203.3726184, 0.0], &amp;</div><div class="line">      [npts, ndof])</div><div class="line">  xout = reshape([0.0, 0.38905, 0.77816, 0.97269, 1.16714, 1.556, &amp;</div><div class="line">      1.94484, 0.9726, -1.0e-5, 0.0, -0.388886, -0.77775, -0.97215, &amp;</div><div class="line">      -1.16654, -1.55533, -1.9441, -0.97171, 4.0e-5, 0.0, -0.00044, &amp;</div><div class="line">      -0.0013, -0.0024, -0.00382, -0.00528, -0.00257, 0.00015, 0.0, &amp;</div><div class="line">      0.00144, 0.00306, 0.00446, 0.00567, 0.00688, 0.00451, -2.0e-5, &amp;</div><div class="line">      0.0, 0.00122, 0.00259, 0.0029, 0.00314, 0.00338, 0.00356, 0.00477,&amp;</div><div class="line">      -1.0e-5, 0.0, 0.00021, 0.00051, 0.00069, 0.00088, 0.0013, 0.00178,&amp;</div><div class="line">      0.00058, 3.0e-5, 0.0, 0.27156, 0.54329, 0.81507, 1.08682, 1.35881,&amp;</div><div class="line">      0.81553, 1.0e-5, 0.0, -0.27145, -0.54312, -0.81493, -1.0868, &amp;</div><div class="line">      -1.35879, -0.81548, 0.0], [npts, ndof])</div><div class="line"></div><div class="line">  <span class="comment">! Compute the calibration gains</span></div><div class="line">  xint = transpose(xin)</div><div class="line">  xmeast = transpose(xout)</div><div class="line">  c = linear_least_squares(xmeast, xint)</div><div class="line">  xmeas = matmul(xout, transpose(c))</div><div class="line">  xerr = xmeas - xin</div><div class="line"></div><div class="line">  <span class="comment">! The indices are</span></div><div class="line">  indices = [1, 17, 18, 34]</div><div class="line"></div><div class="line">  <span class="comment">! Compute the crosstalk matrix</span></div><div class="line">  xt = crosstalk(xerr, indices)</div><div class="line"><span class="keyword">end program</span></div></div><!-- fragment --> The least squares fit generates the following matrix of calibration gains. <pre class="fragment"> 7713.710427        33.5206917
 -0.214743728       249.4768498</pre> The resulting measured values are then as follows. <pre class="fragment"> 0                  0
 3001.05999         0.220815702
 6002.58754         0.479040049
 7503.146099        0.514603781
 9003.085297        0.532721294
 12002.64668        0.509090486
 15002.05157        0.470495427
 7502.514526        0.981144827
 -0.077472309       -0.002492621
 0                  0
 -2999.74699        0.135900968
 -5999.321307       0.294250127
 -7498.860677       0.380902151
 -8998.322469       0.470046784
 -11997.32196       0.658317276
 -14996.16495       0.861552092
 -7495.47032        0.353365205
 0.30955403         7.48E-03
 ----------------------------
 0                  0
 5.708846869        67.74803112
 8.183633648        135.5385616
 8.808803389        203.3416047
 6.96458466         271.1372518
 4.81985707         338.9927591
 7.512893885        203.4564077
 1.157391826        2.46E-03
 0                  0
 2.008550989        -67.72080332
 5.398195074        -135.4965304
 7.086130239        -203.3071324
 7.306450061        -271.1326527
 7.522743936        -338.9881361
 7.453379661        -203.4443484
 -0.154274205       4.29E-06</pre> The crosstalk error matrix is then as follows. <pre class="fragment"> 0                  0.981144827
 8.808803389        0</pre> </dd></dl>

<p class="definition">Definition at line <a class="el" href="curvefit__calibration_8f90_source.html#l00886">886</a> of file <a class="el" href="curvefit__calibration_8f90_source.html">curvefit_calibration.f90</a>.</p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>D:/Projects/Code/curvefit/src/<a class="el" href="curvefit__calibration_8f90_source.html">curvefit_calibration.f90</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecurvefit__calibration.html">curvefit_calibration</a></li><li class="navelem"><a class="el" href="interfacecurvefit__calibration_1_1crosstalk.html">crosstalk</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
